{"ast":null,"code":"import _classCallCheck from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/surya/coding/fruit-mania/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/surya/coding/fruit-mania/src/pages/welcome.js\";\nimport React, { Component } from 'react';\nimport { Modal, Row, Col, Form, Icon, Input, Button, message } from 'antd';\nimport $ from 'jquery';\nvar FormItem = Form.Item;\n\nvar LoginForm = function LoginForm(props) {\n  return React.createElement(\"div\", {\n    className: \"auth-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(Form, {\n    onSubmit: props.submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"number\",\n    placeholder: \"Mobile Number\",\n    onChange: props.change,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  })), React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: props.passchange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  })), React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, React.createElement(Button, {\n    htmlType: \"submit\",\n    className: \"auth-submit-btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, \"LOGIN\"), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: \"google\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }), React.createElement(Icon, {\n    type: \"facebook\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  })))));\n};\n\nvar RegisterForm = function RegisterForm(props) {\n  return React.createElement(\"div\", {\n    className: \"auth-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(Form, {\n    onSubmit: props.submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"number\",\n    placeholder: \"Mobile Number\",\n    onChange: props.change,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  })), React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: props.passchange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  })), React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(Button, {\n    htmlType: \"submit\",\n    className: \"auth-submit-btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"REGISTER\"), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: \"google\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(Icon, {\n    type: \"facebook\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })))));\n};\n\nvar OtpForm = function OtpForm(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    title: \"Enter the otp\",\n    visible: props.visible,\n    onOk: props.ok,\n    onCancel: props.cancel,\n    footer: [React.createElement(Button, {\n      key: \"submit\",\n      type: \"primary\",\n      onClick: props.otpsubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Submit\")],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(FormItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"number\",\n    placeholder: \"enter otp\",\n    onChange: props.otpchange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }))));\n};\n\nvar Welcome =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Welcome, _Component);\n\n  function Welcome(props) {\n    var _this;\n\n    _classCallCheck(this, Welcome);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Welcome).call(this, props));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var url = 'http://127.0.0.1:8000/api/registration';\n\n      if (_this.state.login) {\n        url = 'http://127.0.0.1:8000/api/users';\n      }\n\n      if (_this.state.number.toString().length === 10 && _this.state.password.length > 5) {\n        var data = {\n          'mobile': _this.state.number,\n          'password': _this.state.password\n        };\n        $.post(url, data, function (data) {\n          if (this.state.login) {\n            localStorage.setItem(\"token\", data['token']);\n            this.props.history.push('/packages');\n          } else {\n            this.setState({\n              visible: true\n            });\n          }\n        }.bind(_assertThisInitialized(_assertThisInitialized(_this))), 'json').fail(function (data) {\n          console.log(data);\n          message.error(data.responseJSON[\"error\"]);\n        });\n      } else {\n        if (_this.state.number.toString().length !== 10) {\n          message.error('enter a valid number');\n        } else {\n          message.error('Password should be more than 5 characters');\n        }\n      }\n    };\n\n    _this.otpChange = function (e) {\n      console.log(e.target.value);\n\n      _this.setState({\n        otp: e.target.value\n      });\n    };\n\n    _this.otpSubmit = function (e) {\n      e.preventDefault();\n      var data = {\n        'otp': _this.state.otp,\n        'mobile': _this.state.number\n      };\n      $.ajax({\n        url: 'http://127.0.0.1:8000/api/otp',\n        data: data,\n        \"method\": \"POST\",\n        'dataType': 'json',\n        success: function (data) {\n          console.log(data);\n          localStorage.setItem(\"token\", data['token']);\n          this.props.history.push('/packages'); // return <Redirect to='/packages' />\n        }.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n        error: function (xhr, status, err) {\n          message.error(xhr.responseJSON[\"error\"]);\n        }.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n      });\n    };\n\n    _this.handleOk = function (e) {\n      console.log(e);\n\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.state = {\n      login: false,\n      number: 0,\n      password: \"\",\n      visible: false,\n      otp: 0\n    };\n    _this.onNumberChange = _this.onNumberChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onPasswordChange = _this.onPasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOk = _this.handleOk.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCancel = _this.handleCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.otpChange = _this.otpChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.otpSubmit = _this.otpSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Welcome, [{\n    key: \"onNumberChange\",\n    value: function onNumberChange(event) {\n      this.setState({\n        number: event.target.value\n      });\n    }\n  }, {\n    key: \"onPasswordChange\",\n    value: function onPasswordChange(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Row, {\n        className: \"welcome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 12,\n        xs: 24,\n        className: \"auth-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"/images/welcome_logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"auth-forms\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"auth-btn\",\n        onClick: function onClick() {\n          return _this2.setState({\n            login: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Register\"), React.createElement(Button, {\n        className: \"auth-btn\",\n        onClick: function onClick() {\n          return _this2.setState({\n            login: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 20,\n        xs: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, this.state.login ? React.createElement(LoginForm, {\n        submit: this.handleSubmit,\n        change: this.onNumberChange,\n        passchange: this.onPasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }) : React.createElement(RegisterForm, {\n        submit: this.handleSubmit,\n        change: this.onNumberChange,\n        passchange: this.onPasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }))), this.state.visible, \" ? (\", React.createElement(OtpForm, {\n        visible: this.state.visible,\n        ok: this.handleOk,\n        cancel: this.handleCancel,\n        otpchange: this.otpChange,\n        otpsubmit: this.otpSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), \") : \\\"\\\"\")), React.createElement(Col, {\n        sm: 12,\n        xs: 24,\n        className: \"banner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Welcome;\n}(Component);\n\nexport { Welcome as default };","map":{"version":3,"sources":["/home/surya/coding/fruit-mania/src/pages/welcome.js"],"names":["React","Component","Modal","Row","Col","Form","Icon","Input","Button","message","$","FormItem","Item","LoginForm","props","submit","change","passchange","RegisterForm","OtpForm","visible","ok","cancel","otpsubmit","otpchange","Welcome","handleSubmit","e","preventDefault","url","state","login","number","toString","length","password","data","post","localStorage","setItem","history","push","setState","bind","fail","console","log","error","responseJSON","otpChange","target","value","otp","otpSubmit","ajax","success","xhr","status","err","handleOk","handleCancel","onNumberChange","onPasswordChange","event"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Modal, Row, Col, Form, Icon, Input, Button, message } from 'antd';\nimport $ from 'jquery'; \n\nconst FormItem = Form.Item;\n\nconst LoginForm = (props) => (\n  <div className=\"auth-form\">\n    <Form onSubmit={props.submit}>\n      <FormItem>\n        <Input type=\"number\" placeholder=\"Mobile Number\" onChange={props.change}/>\n      </FormItem>\n      <FormItem>\n        <Input type=\"password\" placeholder=\"Password\" onChange={props.passchange}/>\n      </FormItem>\n      <FormItem>\n        <Button htmlType=\"submit\" className=\"auth-submit-btn\">\n          LOGIN\n        </Button>\n        <span>\n          <Icon type=\"google\" />\n          <Icon type=\"facebook\" />\n        </span>\n      </FormItem>\n    </Form>\n  </div>\n);\n\nconst RegisterForm = (props) => (\n  <div className=\"auth-form\">\n    <Form onSubmit={props.submit}>\n      <FormItem>\n        <Input type=\"number\" placeholder=\"Mobile Number\" onChange={props.change}/>\n      </FormItem>\n      <FormItem>\n        <Input type=\"password\" placeholder=\"Password\" onChange={props.passchange}/>\n      </FormItem>\n      <FormItem>\n        <Button htmlType=\"submit\" className=\"auth-submit-btn\">\n          REGISTER\n        </Button>\n        <span>\n          <Icon type=\"google\" />\n          <Icon type=\"facebook\" />\n        </span>\n      </FormItem>\n    </Form>\n  </div>\n);\n\nconst OtpForm = (props) =>(\n  <div>\n    <Modal\n      title=\"Enter the otp\"\n      visible={props.visible}\n      onOk={props.ok}\n      onCancel={props.cancel}\n      footer={[\n        <Button key=\"submit\" type=\"primary\" onClick={props.otpsubmit}>\n          Submit\n            </Button>,\n      ]}\n      >\n      <FormItem>\n        <Input type=\"number\" placeholder=\"enter otp\" onChange={props.otpchange}/>\n      </FormItem>\n    </Modal>\n  </div>\n);\n\nexport default class Welcome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      login: false,\n      number: 0,\n      password: \"\",\n      visible: false,\n      otp:0\n    };\n    this.onNumberChange = this.onNumberChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.onPasswordChange = this.onPasswordChange.bind(this)\n    this.handleOk = this.handleOk.bind(this)\n    this.handleCancel = this.handleCancel.bind(this)\n    this.otpChange = this.otpChange.bind(this)\n    this.otpSubmit = this.otpSubmit.bind(this)\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    var url = 'http://127.0.0.1:8000/api/registration'\n    if(this.state.login){\n      url = 'http://127.0.0.1:8000/api/users'\n    }\n    if(this.state.number.toString().length === 10 && this.state.password.length > 5){\n      var data = { 'mobile': this.state.number, 'password': this.state.password}\n      $.post(url, data,function(data){\n        if (this.state.login) {\n          localStorage.setItem(\"token\", data['token']);\n          this.props.history.push('/packages')\n        }\n        else{\n          this.setState({\n            visible: true,\n          });\n        }\n      }.bind(this), 'json')\n        .fail(function (data) {\n          console.log(data)\n          message.error(data.responseJSON[\"error\"])\n        })\n    }\n    else{\n      if (this.state.number.toString().length !== 10){\n        message.error('enter a valid number')\n      }\n      else{\n        message.error('Password should be more than 5 characters')\n      }\n    }\n  };\n\n  otpChange = (e) => {\n    console.log(e.target.value)\n    this.setState({\n      otp: e.target.value,\n    });\n  }\n\n  otpSubmit = (e) => {\n    e.preventDefault()\n    var data = { 'otp': this.state.otp, 'mobile': this.state.number}\n    $.ajax({\n      url: 'http://127.0.0.1:8000/api/otp',\n      data: data,\n      \"method\": \"POST\",\n      'dataType': 'json',\n      success: function (data) {\n        console.log(data)\n        localStorage.setItem(\"token\", data['token']);\n        this.props.history.push('/packages')\n        // return <Redirect to='/packages' />\n      }.bind(this),\n      error: function (xhr, status, err) {\n        message.error(xhr.responseJSON[\"error\"])\n      }.bind(this)\n    });\n  }\n  \n  handleOk = (e) => {\n    console.log(e);\n    this.setState({\n      visible: false,\n    });\n  }\n\n  handleCancel = (e) => {\n    this.setState({\n      visible: false,\n    });\n  }\n\n  onNumberChange(event) {\n    this.setState({ number: event.target.value });\n  }\n  onPasswordChange(event) {\n    this.setState({ password: event.target.value });\n  }\n\n  render() {\n    return (\n      <Row className=\"welcome\">\n        <Col sm={12} xs={24} className=\"auth-block\">\n          <div className=\"logo-block\">\n            <img src=\"/images/welcome_logo.png\" />\n          </div>\n          <div className=\"auth-forms\">\n            <Row type=\"flex\" justify=\"center\">\n              <Button className=\"auth-btn\" onClick={() => this.setState({login: false})} >Register</Button>\n              <Button className=\"auth-btn\" onClick={() => this.setState({login: true})}>Login</Button>\n            </Row>\n            <br />\n            <Row type=\"flex\" justify=\"center\">\n              <Col sm={20} xs={24}>\n                {this.state.login ? (\n                  <LoginForm submit={this.handleSubmit} change={this.onNumberChange} passchange={this.onPasswordChange} />\n                ) : (\n                    <RegisterForm submit={this.handleSubmit} change={this.onNumberChange} passchange={this.onPasswordChange} />\n                )}\n              </Col>\n            </Row>\n            {this.state.visible} ? (<OtpForm visible={this.state.visible} ok={this.handleOk} cancel={this.handleCancel} otpchange={this.otpChange} otpsubmit={this.otpSubmit}/>) : \"\"\n          </div>\n        </Col>\n        <Col sm={12} xs={24} className=\"banner\" />\n      </Row>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}